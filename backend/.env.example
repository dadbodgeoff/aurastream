# =============================================================================
# AuraStream Backend - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# =========================================================================
# Environment
# =========================================================================
# Options: development, staging, production
APP_ENV=development
# Enable debug mode (shows detailed errors, enables API docs)
DEBUG=true

# =========================================================================
# Server
# =========================================================================
API_HOST=0.0.0.0
API_PORT=8000
# Full URL for the API (used for generating links)
API_BASE_URL=http://localhost:8000

# =========================================================================
# Supabase (REQUIRED)
# =========================================================================
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# =========================================================================
# JWT Authentication (REQUIRED)
# =========================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# MUST be at least 32 characters
JWT_SECRET_KEY=your-secret-key-at-least-32-characters-long
JWT_ALGORITHM=HS256
# Token expiration in hours
JWT_EXPIRATION_HOURS=24

# =========================================================================
# Redis (Job Queue, Caching, Analytics)
# =========================================================================
# For local development with Docker: redis://redis:6379
# For local development without Docker: redis://localhost:6379
REDIS_URL=redis://localhost:6379

# =========================================================================
# Storage (S3/CDN)
# =========================================================================
# Using Supabase Storage by default, S3 is optional
S3_BUCKET=streamer-studio-assets
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
# CDN URL for serving assets (leave empty to use Supabase CDN)
CDN_BASE_URL=

# =========================================================================
# Google AI Services (REQUIRED for generation)
# =========================================================================
# Main Google API key (Gemini, Vision, etc.)
# Get from Google AI Studio: https://aistudio.google.com/
GOOGLE_API_KEY=your-google-api-key
GOOGLE_GEMINI_API_KEY=your-google-api-key

# Model for image generation
NANO_BANANA_MODEL=gemini-2.5-flash

# Model for AI Coach (optional, defaults to gemini-2.0-flash)
COACH_LLM_MODEL=gemini-2.0-flash

# =========================================================================
# YouTube Data API (REQUIRED for Creator Intel)
# =========================================================================
# Separate key with dedicated quota for YouTube API calls
# Get from: https://console.cloud.google.com/apis/credentials
YOUTUBE_DATA_API_KEY=your-youtube-api-key

# =========================================================================
# Coach Grounding / Web Search (Optional)
# =========================================================================
# For AI Coach web grounding feature
GOOGLE_PLACES_API_KEY=
GOOGLE_CUSTOM_SEARCH_ENGINE_ID=

# Search provider: google, none (defaults to google if keys provided)
COACH_SEARCH_PROVIDER=google

# =========================================================================
# Stripe Payments (REQUIRED for billing)
# =========================================================================
# Get from Stripe Dashboard: https://dashboard.stripe.com/
# Use sk_test_ keys for development, sk_live_ for production
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Price IDs for subscription tiers
STRIPE_PRICE_PRO=price_...
STRIPE_PRICE_STUDIO=price_...

# =========================================================================
# OAuth Providers (Configure as needed)
# =========================================================================

# Google OAuth
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Twitch OAuth (REQUIRED for Twitch features)
# Get from: https://dev.twitch.tv/console/apps
TWITCH_CLIENT_ID=
TWITCH_CLIENT_SECRET=

# Discord OAuth
# Get from: https://discord.com/developers/applications
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# YouTube OAuth (uses Google OAuth credentials)
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# =========================================================================
# CORS (Cross-Origin Resource Sharing)
# =========================================================================
# Comma-separated list of allowed origins
# For production, set to your actual domain(s)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:19006,http://localhost:5173
# Production example:
# ALLOWED_ORIGINS=https://aurastream.shop,https://www.aurastream.shop

# =========================================================================
# Frontend URL (for email links, etc.)
# =========================================================================
FRONTEND_URL=http://localhost:3000
# Production example:
# FRONTEND_URL=https://aurastream.shop

# =========================================================================
# Rate Limiting
# =========================================================================
RATE_LIMITING_ENABLED=true
# Requests per minute by tier
RATE_LIMIT_API_ANON=60
RATE_LIMIT_API_FREE=120
RATE_LIMIT_API_PRO=240
RATE_LIMIT_API_STUDIO=500

# Use Redis for distributed rate limiting (recommended for production)
# When true, rate limits persist across restarts and are shared across instances
USE_REDIS_RATE_LIMITING=false
# Production example:
# USE_REDIS_RATE_LIMITING=true

# =========================================================================
# Authentication Security
# =========================================================================
# Security mode: "strict" or "permissive"
# STRICT: Fails auth operations if Redis is unavailable (recommended for production)
# PERMISSIVE: Allows operations with degraded security, logs warnings (for development)
AUTH_SECURITY_MODE=permissive
# Production example:
# AUTH_SECURITY_MODE=strict

# =========================================================================
# Monitoring & Logging
# =========================================================================
# Sentry DSN for error tracking (optional)
SENTRY_DSN=
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =========================================================================
# Audit Logging (Optional)
# =========================================================================
AUDIT_LOGGING_ENABLED=true
AUDIT_MAX_EVENTS=10000

# =========================================================================
# Worker Configuration (Optional)
# =========================================================================
# Set to "true" to run workers immediately on startup (for testing)
RUN_IMMEDIATELY=false

# Custom prompts directory (optional)
PROMPTS_DIR=prompts/
QUICK_CREATE_PROMPTS_DIR=prompts/quick-create/
